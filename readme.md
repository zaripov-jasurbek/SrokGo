# SrokGo API

SrokGo — backend API на **NestJS + MongoDB** для сервиса продажи/бронирования «спасённых» наборов еды (аналог Too Good To Go):
- бизнесы (заведения) публикуют наборы (`packages`),
- пользователи оформляют заказы (`orders`),
- пользователи оставляют отзывы и реакции (`comments`).

## Что уже умеет проект

### 1) Аутентификация и профили
- Отдельные auth-потоки для:
  - пользователей: `auth/user/*`
  - бизнесов: `auth/business/*`
- Регистрация, логин, получение/обновление профиля (`/me`), verify endpoint.
- Для пользователя есть загрузка аватара: `POST /auth/user/me/avatar`.

### 2) Пользователи
- CRUD для пользователя: создание, получение списка, получение по id, обновление, удаление.

### 3) Компании (заведения)
- CRUD для компаний.
- Поиск компаний (`POST /company/find`).
- Хранение категории, рейтинга, геоданных, времени работы.

### 4) Пакеты (наборы еды)
- CRUD для пакетов.
- Получение пакетов по компании.
- Фильтрация по категории, диапазону цены, активности и пагинации.
- Управление активностью (`:id/activate`) и рейтингом (`:id/rating`).

### 5) Заказы
- Создание заказа и управление им.
- Поддерживаются статусы заказа:
  - `pending`, `confirmed`, `ready`, `cancelled`, `noShow`, `completed`.

### 6) Комментарии и реакции
- Комментарии к пакету и/или компании.
- Вложенные комментарии (reply через `parentId`, получение children).
- Редактирование текста и удаление комментариев.
- Реакции `like/dislike` на комментарии.

---

## Текущий стек
- **NestJS 11**
- **MongoDB + Mongoose**
- TypeScript

## Быстрый старт

```bash
npm install
npm run start:dev
```

API по умолчанию запускается на `http://localhost:3000`.

### Важно
Сейчас подключение к MongoDB прописано напрямую в `src/app.module.ts`.
Рекомендуется вынести его в переменные окружения (например, `MONGO_URI`) и использовать конфиг-модуль.

---

## Планы развития (roadmap)

### Ближайшие задачи
- Улучшить типизацию DTO/props во всех модулях.
- Перейти на полноценный JWT + bcrypt flow.
- Добавить систему уведомлений:
  - `GET /notifications`
  - `GET /notifications/unread`
  - `PUT /notifications/{id}/read`
  - `PUT /notifications/read-all`
  - `GET /notifications/settings`
  - `PUT /notifications/settings`

### Социальные функции
- Подписки на заведения (follow/unfollow).
- Избранные заведения.
- Лента активности (`/feed`).
- Шеринг заказов/спасённой еды.

### Развитие продукта
- Истории / посты / чат (в духе 1Fit-сценариев).
- Возможность ответа компании на отзывы пользователей.
- Улучшение системы рейтингов (пересчёт на основе отзывов и реакций).

---

## Идея проекта

Цель SrokGo — помочь бизнесам сократить пищевые отходы, а пользователям — получать качественную еду по выгодной цене.
Проект уже покрывает основную цепочку: **бизнес → пакет → заказ → отзыв**, и готов к развитию в полноценную social-commerce платформу.
